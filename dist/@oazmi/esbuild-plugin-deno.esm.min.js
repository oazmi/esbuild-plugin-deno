function zt(e,t,r){let o=r===void 0?t:t.bind(r),n=e.length-1;for(;n>=0;){if(o(e[n],n,e))return n;n--}return-1}function Bt(e,t,r){let o=e.findLastIndex(t,r);return o===-1?void 0:e[o]}Array.prototype.findLastIndex||(Array.prototype.findLastIndex=function(e,t){return zt(this,e,t)});Array.prototype.findLast||(Array.prototype.findLast=function(e,t){return Bt(this,e,t)});Uint8Array.prototype.findLastIndex||(Uint8Array.prototype.findLastIndex=function(e,t){return zt(this,e,t)});Uint8Array.prototype.findLast||(Uint8Array.prototype.findLast=function(e,t){return Bt(this,e,t)});var Sr={},Gt=Cr(globalThis,Sr);function Cr(e,t){return new Proxy(e,{get(r,o,n){return o in t?t[o]:e[o]},set(r,o,n){return o in t&&delete t[o],e[o]=n,!0},deleteProperty(r,o){let n=!1;return o in t&&(delete t[o],n=!0),o in e&&(delete e[o],n=!0),n},ownKeys(r){let o=Reflect.ownKeys(e),n=Reflect.ownKeys(t),s=new Set(n);return[...o.filter(i=>!s.has(i)),...n]},defineProperty(r,o,n){return o in t&&delete t[o],Reflect.defineProperty(e,o,n),!0},getOwnPropertyDescriptor(r,o){return o in t?Reflect.getOwnPropertyDescriptor(t,o):Reflect.getOwnPropertyDescriptor(e,o)},has(r,o){return o in t||o in e}})}var Nr=JSON;var rt=Object;var Ht=Symbol;var Me=e=>e.length===0;var _e=Nr.stringify;var ot=rt.assign;var q=rt.entries;var nt=rt.keys;var Se=()=>{let e,t;return[new Promise((o,n)=>{e=o,t=n}),e,t]};var st=Ht.iterator;var Vt=Ht.toStringTag;var Te=encodeURI;var pe=decodeURI;var M;(function(e){e[e.LOG=0]="LOG",e[e.ASSERT=0]="ASSERT",e[e.ERROR=1]="ERROR",e[e.PRODUCTION=1]="PRODUCTION",e[e.MINIFY=1]="MINIFY"})(M||(M={}));var V=(e,t,...r)=>o=>e[t].bind(o,...r);var $e=(e,t,...r)=>e[t].bind(e,...r),it=e=>e.prototype,Or=it(Array),ne=it(Map),at=it(Set);var Ce=V(Or,"push");var ct=V(at,"add");var pt=V(at,"delete");var lt=V(at,"has");var ut=V(ne,"delete"),mt=V(ne,"entries"),dt=V(ne,"forEach"),le=V(ne,"get"),xe=V(ne,"has"),ft=V(ne,"keys"),ye=V(ne,"set"),ht=V(ne,"values");var Fe=e=>{let t=typeof e;return t==="object"||t==="function"};var re=e=>typeof e=="object";var j=e=>typeof e=="string";var kr=/[.*+?^${}()|[\]\\]/g,gt=e=>e.replaceAll(kr,"\\$&"),se=(e,t,r="")=>e.startsWith(t)?r+e.slice(t.length):void 0,Ue=(e,t,r="")=>e.endsWith(t)?(t===""?e:e.slice(0,-t.length))+r:void 0;var Lr=q({"node:":"node","npm:":"npm","jsr:":"jsr","blob:":"blob","data:":"data","http://":"http","https://":"https","file://":"file","./":"relative","../":"relative"}),Mr=["blob","data","relative"],Tr=["jsr","npm","node"],$r=["jsr:","npm:","node:"],K="/",We="./",_t="../",Fr=/\\/g,Ur=/^[a-z]\:[\/\\]/i,Wr=/^\/+/;var zr=/\/?[^\/]+$/,Br=/^(?<basename>.+?)(?<ext>\.[^\.]+)?$/,Gr=/^(?<protocol>jsr:|npm:|node:)(\/*(@(?<scope>[^\/\s]+)\/)?(?<pkg>[^@\/\s]+)(@(?<version>[^\/\r\n\t\f\v]+))?)?(?<pathname>\/.*)?$/,ue=(e,t)=>e.startsWith(t),qt=(e,t)=>e.endsWith(t),xt=e=>ue(e,K)||ue(e,"~")||Ur.test(e),B=e=>{if(!(!e||e==="")){for(let[t,r]of Lr)if(ue(e,t))return r;return xt(e)?"local":"relative"}},X=e=>{e=pe(j(e)?e:e.href);let{protocol:t,scope:r,pkg:o,version:n,pathname:s}=Gr.exec(e)?.groups??{};if(t===void 0||o===void 0)throw new Error(M.ERROR?"invalid package url format was provided: "+e:"");let i=r||void 0,a=n||void 0,c=s||K,p=`${i?"@"+i+K:""}${o}${a?"@"+a:""}`,u=Te(`${t}/${p}${c}`);return{protocol:t,scope:i,pkg:o,version:a,pathname:c,host:p,href:u}},D=(e,t)=>{if(!j(e))return e;e=y(e);let r=t;if(j(t)){let s=B(t);if(Mr.includes(s))throw new Error(M.ERROR?"the following base scheme (url-protocol) is not supported: "+s:"");r=D(t)}let o=B(e),n=Tr.includes(o);if(o==="local")return new URL("file://"+Te(e));if(n)return new URL(X(e).href);if(o==="relative"){let s=r?r.protocol:void 0;if(!$r.includes(s))return new URL(Te(e),r);let{protocol:a,host:c,pathname:p}=X(r),u=new URL(e,"x:"+p).pathname;e=`${a}/${c}${u}`}return new URL(e)},Hr=e=>e.replace(Wr,"");var me=e=>ue(e,We)?e:ue(e,K)?"."+e:We+e,A=e=>qt(e,K)?e:e+K;var Zt=(e,t={})=>{let{keepRelative:r=!0}=re(t)?t:{},o=e.split(K),n=o.at(-1),s=[".."],i=r&&o[0]===".";o.length>=2&&(n==="."||n==="..")&&o.push("");for(let c of o)c===".."?s.at(-1)!==".."?s.pop():s.push(c):c!=="."&&s.push(c);return s.shift(),i&&s[0]!==".."&&s.unshift("."),s.join(K)},oe=(e,t)=>Zt(y(e),t),y=e=>e.replaceAll(Fr,K);var Jt=e=>Hr(zr.exec(e)?.[0]??""),Vr=e=>{let{basename:t="",ext:r=""}=Br.exec(e)?.groups??{};return[t,r]},yt=e=>{let t=oe(e),r=Jt(t),o=r.length,n=o>0?t.slice(0,-o):t,s=Jt(n.slice(0,-1)),[i,a]=Vr(r);return{path:t,dirpath:n,dirname:s,filename:r,basename:i,extname:a}};var Qt=(...e)=>{e=e.map(r=>r==="."?We:r===".."?_t:r);let t=e.reduce((r,o)=>{let n=r.pop(),s=qt(n,K),i=s?n:n+K;if(!s){let a=ue(o,We),c=ue(o,_t);a?o="."+o:c&&(o=_t+o)}return r.push(i,o),r},[K]);return t.shift(),Zt(t.join(""))},ie=(...e)=>Qt(...e.map(y)),Kr=(e,t=xt)=>{let r=j(e)?()=>e:e;return(...o)=>{let n=o.findLastIndex(t);return n>=0?o=o.slice(n):o.unshift(A(r())),Qt(...o)}},Ie=(e,t=xt)=>{j(e)&&(e=y(e));let r=j(e)?()=>e:()=>y(e()),o=Kr(r,t);return(...n)=>o(...n.map(y))};var m;(function(e){e[e.DENO=0]="DENO",e[e.BUN=1]="BUN",e[e.NODE=2]="NODE",e[e.CHROMIUM=3]="CHROMIUM",e[e.EXTENSION=4]="EXTENSION",e[e.WEB=5]="WEB",e[e.WORKER=6]="WORKER"})(m||(m={}));var T=Gt,Xr={[m.DENO]:()=>!!T.Deno?.version,[m.BUN]:()=>!!T.Bun?.version,[m.NODE]:()=>!!T.process?.versions,[m.CHROMIUM]:()=>!!T.chrome?.runtime,[m.EXTENSION]:()=>!!T.browser?.runtime,[m.WEB]:()=>!!T.window?.document,[m.WORKER]:()=>!!(re(T.self)&&Fe(T.WorkerGlobalScope)&&T.self instanceof T.WorkerGlobalScope)},Yr=[m.DENO,m.BUN,m.NODE,m.CHROMIUM,m.EXTENSION,m.WEB,m.WORKER],Ne=()=>{for(let e of Yr)if(Xr[e]())return e;throw new Error(M.ERROR?`failed to detect current javascript runtime!
please report this issue to "https://github.com/omar-azmi/kitchensink_ts/issues", along with information on your runtime environment.`:"")},er=e=>{switch(e){case m.DENO:return T.Deno;case m.BUN:return T.Bun;case m.NODE:return T.process;case m.CHROMIUM:return T.chrome;case m.EXTENSION:return T.browser;case m.WEB:return T.window;case m.WORKER:return T.self;default:throw new Error(M.ERROR?`an invalid runtime enum was provided: "${e}".`:"")}},tr=(e,t=!0)=>{let r=er(e);if(!r)throw new Error(M.ERROR?`the requested runtime associated with the enum "${e}" is undefined (i.e. you're running on a different runtime from the provided enum).`:"");switch(e){case m.DENO:case m.BUN:case m.NODE:return y(r.cwd());case m.CHROMIUM:case m.EXTENSION:return r.runtime.getURL("");case m.WEB:case m.WORKER:return new URL("./",t?r.location.href:r.location.origin).href}};var Jr={args:[]},bt=async(e,t,r={})=>{let{args:o,cwd:n,signal:s}={...Jr,...r},i=Me(o);if(!er(e))throw new Error(M.ERROR?`the requested runtime associated with the enum "${e}" is undefined (i.e. you're running on a different runtime from the provided enum).`:"");if(!t&&i)return{stdout:"",stderr:""};switch(e){case m.DENO:case m.BUN:case m.NODE:{let{exec:c}=await Qr(),p=i?t:`${t} ${o.join(" ")}`,[u,l,g]=Se();return c(p,{cwd:n,signal:s},(_,d,N)=>{_&&g(_.message),l({stdout:d,stderr:N})}),u}default:throw new Error(M.ERROR?`your non-system runtime environment enum ("${e}") does not support shell commands`:"")}};var qr;var Zr=async()=>import("node:child_process"),Qr=async()=>qr??=await Zr();var Pt=e=>{let t=[];e.forEach(n=>{t.push(...n)});let r=new Map([...new Set(t)].map(n=>[n,new Set])),o=le(r);for(let[n,s]of e)s.forEach(i=>o(i).add(n));return r},be=class{constructor(t,r){let o=t??(r?Pt(r):new Map),n=r??(t?Pt(t):new Map),s=ye(o),i=ye(n),a=ut(o),c=ut(n),p=o.size,u=n.size,l=dt(o),g=dt(n),_=le(o),d=le(n),N=xe(o),J=xe(n),W=mt(o),$=mt(n),v=ft(o),R=ft(n),U=ht(o),w=ht(n),O=(f,...S)=>{let C=_(f)??(s(f,new Set)&&_(f)),F=lt(C),ee=ct(C);for(let z of S)F(z)||(ee(z),d(z)?.add(f)||i(z,new Set([f])))},x=(f,...S)=>{let C=d(f)??(i(f,new Set)&&d(f)),F=lt(C),ee=ct(C);for(let z of S)F(z)||(ee(z),_(z)?.add(f)||s(z,new Set([f])))},h=()=>{o.clear(),n.clear()},b=(f,S=!1)=>{let C=_(f);if(C){for(let F of C)d(F).delete(f);S?C.clear():S=a(f)}return S},I=(f,S=!1)=>{let C=d(f);if(C){for(let F of C)_(F).delete(f);S?C.clear():S=c(f)}return S};ot(this,{fmap:o,rmap:n,size:p,rsize:u,forEach:l,rforEach:g,get:_,rget:d,has:N,rhas:J,entries:W,rentries:$,keys:v,rkeys:R,values:U,rvalues:w,add:O,radd:x,clear:h,delete:b,rdelete:I,remove:(f,...S)=>{let C=_(f);if(C){let F=pt(C);for(let ee of S)F(ee)&&d(ee).delete(f)}},rremove:(f,...S)=>{let C=d(f);if(C){let F=pt(C);for(let ee of S)F(ee)&&_(ee).delete(f)}},set:(f,S)=>(b(f,!0),O(f,...S),this),rset:(f,S)=>(I(f,!0),x(f,...S),this),[st]:W,[Vt]:"InvertibleMap"})}};var ze=class{wmap=new WeakMap;smap=new Map;pick(t){return Fe(t)?this.wmap:this.smap}get(t){return this.pick(t).get(t)}set(t,r){return this.pick(t).set(t,r),this}has(t){return this.pick(t).has(t)}delete(t){return this.pick(t).delete(t)}},eo=Symbol(M.MINIFY||"represents an unset value for a tree");var Ws=Symbol(M.MINIFY||"a rejection by a throttled function"),zs=Symbol(M.MINIFY||"a timeout by an awaited promiseTimeout function");var ro=(e,t=!1)=>{let r=t?new ze:new Map,o=$e(r,"get"),n=$e(r,"set"),s=$e(r,"has");return{fn:a=>{let c=s(a),p=c?o(a):e(a);return c||n(a,p),p},memory:r}},Et=e=>ro(e).fn;function vt(e){if(new.target)throw new TypeError("Cannot create an instance: parse is not a constructor");return new Rt(e).parse()}var Rt=class{#s=new Set(` 	\r
`);#a=new Set([..."[]{}:,/",...this.#s]);#e;#r;#o;constructor(t){this.#e=`${t}`,this.#r=this.#e.length,this.#o=this.#c()}parse(){let t=this.#t(),r=this.#n(t),{done:o,value:n}=this.#o.next();if(!o)throw new SyntaxError(ae(n));return r}#t(){let{done:t,value:r}=this.#o.next();if(t)throw new SyntaxError("Cannot parse JSONC: unexpected end of JSONC input");return r}*#c(){for(let t=0;t<this.#r;t++)if(!this.#s.has(this.#e[t])){if(this.#e[t]==="/"&&this.#e[t+1]==="*"){t+=2;let r=!1;for(;t<this.#r;t++)if(this.#e[t]==="*"&&this.#e[t+1]==="/"){r=!0;break}if(!r)throw new SyntaxError("Cannot parse JSONC: unexpected end of JSONC input");t++;continue}if(this.#e[t]==="/"&&this.#e[t+1]==="/"){for(t+=2;t<this.#r&&!(this.#e[t]===`
`||this.#e[t]==="\r");t++);continue}switch(this.#e[t]){case"{":yield{type:"BeginObject",position:t};break;case"}":yield{type:"EndObject",position:t};break;case"[":yield{type:"BeginArray",position:t};break;case"]":yield{type:"EndArray",position:t};break;case":":yield{type:"NameSeparator",position:t};break;case",":yield{type:"ValueSeparator",position:t};break;case'"':{let r=t,o=!1;for(t++;t<this.#r&&!(this.#e[t]==='"'&&!o);t++)o=this.#e[t]==="\\"&&!o;yield{type:"String",sourceText:this.#e.substring(r,t+1),position:r};break}default:{let r=t;for(;t<this.#r&&!this.#a.has(this.#e[t]);t++);t--,yield{type:"NullOrTrueOrFalseOrNumber",sourceText:this.#e.substring(r,t+1),position:r}}}}}#n(t){switch(t.type){case"BeginObject":return this.#p();case"BeginArray":return this.#l();case"NullOrTrueOrFalseOrNumber":return this.#u(t);case"String":return this.#i(t);default:throw new SyntaxError(ae(t))}}#p(){let t={};for(;;){let r=this.#t();if(r.type==="EndObject")return t;if(r.type!=="String")throw new SyntaxError(ae(r));let o=this.#i(r),n=this.#t();if(n.type!=="NameSeparator")throw new SyntaxError(ae(n));let s=this.#t();Object.defineProperty(t,o,{value:this.#n(s),writable:!0,enumerable:!0,configurable:!0});let i=this.#t();if(i.type==="EndObject")return t;if(i.type!=="ValueSeparator")throw new SyntaxError(ae(i))}}#l(){let t=[];for(;;){let r=this.#t();if(r.type==="EndArray")return t;t.push(this.#n(r));let o=this.#t();if(o.type==="EndArray")return t;if(o.type!=="ValueSeparator")throw new SyntaxError(ae(o))}}#i(t){let r;try{r=JSON.parse(t.sourceText)}catch{throw new SyntaxError(ae(t))}if(typeof r!="string")throw new TypeError(`Parsed value is not a string: ${r}`);return r}#u(t){if(t.sourceText==="null")return null;if(t.sourceText==="true")return!0;if(t.sourceText==="false")return!1;let r;try{r=JSON.parse(t.sourceText)}catch{throw new SyntaxError(ae(t))}if(typeof r!="number")throw new TypeError(`Parsed value is not a number: ${r}`);return r}};function ae({type:e,sourceText:t,position:r}){let o="";switch(e){case"BeginObject":o="{";break;case"EndObject":o="}";break;case"BeginArray":o="[";break;case"EndArray":o="]";break;case"NameSeparator":o=":";break;case"ValueSeparator":o=",";break;case"NullOrTrueOrFalseOrNumber":case"String":o=30<t.length?`${t.slice(0,30)}...`:t;break}return`Cannot parse JSONC: unexpected token "${o}" in JSONC at position ${r}`}function Be(e,t){if(isNaN(e)||isNaN(t))throw new Error("Cannot compare against non-numbers");return e===t?0:e<t?-1:1}function nr(e=[],t=[]){return e.length&&!t.length?-1:!e.length&&t.length?1:0}function St(e=[],t=[]){let r=Math.max(e.length,t.length);for(let o=0;o<r;o++){let n=e[o],s=t[o];if(n===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(n===void 0)return-1;if(typeof n=="string"&&typeof s=="number")return 1;if(typeof n=="number"&&typeof s=="string"||n<s)return-1;if(n>s)return 1}return 0}var Pe="0|[1-9]\\d*",oo="\\d*[a-zA-Z-][a-zA-Z0-9-]*",no=`(?<major>${Pe})\\.(?<minor>${Pe})\\.(?<patch>${Pe})`,rr=`(?:${Pe}|${oo})`,sr=`(?:-(?<prerelease>${rr}(?:\\.${rr})*))`,or="[0-9A-Za-z-]+",ir=`(?:\\+(?<buildmetadata>${or}(?:\\.${or})*))`,ar=`v?${no}${sr}?${ir}?`,cr=new RegExp(`^${ar}$`),pr="(?:<|>)?=?",so="x|X|\\*",wt=`${Pe}|${so}`,Ge=`[v=\\s]*(?<major>${wt})(?:\\.(?<minor>${wt})(?:\\.(?<patch>${wt})${sr}?${ir}?)?)?`,lr=new RegExp(`^(?<operator>~>?|\\^|${pr})\\s*${Ge}$`),ur=new RegExp(`^(?<operator>${pr})\\s*(${ar})$|^$`);function Ct(e){return typeof e=="number"&&!Number.isNaN(e)&&(!Number.isFinite(e)||0<=e&&e<=Number.MAX_SAFE_INTEGER)}var It=256;var io=new RegExp(`^${Pe}$`);function G(e){return e.split(".").filter(Boolean).map(t=>{if(io.test(t)){let r=Number(t);if(Ct(r))return r}return t})}function te(e){return e.split(".").filter(Boolean)}function ce(e,t){let r=Number(e);if(!Ct(r))throw new TypeError(t);return r}function de(e){return Number.isNaN(e.major)&&Number.isNaN(e.minor)&&Number.isNaN(e.patch)&&(e.prerelease===void 0||e.prerelease.length===0)&&(e.build===void 0||e.build.length===0)}function Y(e,t){return e===t?0:Be(e.major,t.major)||Be(e.minor,t.minor)||Be(e.patch,t.patch)||nr(e.prerelease,t.prerelease)||St(e.prerelease,t.prerelease)}function Nt(e){return e.toFixed(0)}function He(e){let t=Nt(e.major),r=Nt(e.minor),o=Nt(e.patch),n=e.prerelease?.join(".")??"",s=e.build?.join(".")??"";return[[`${t}.${r}.${o}`,n].filter(c=>c).join("-"),s].filter(c=>c).join("+")}function ao(e,t){if(de(t))return!0;let r=Y(e,t);switch(t.operator){case"=":case void 0:return r===0;case"!=":return r!==0;case">":return r>0;case"<":return r<0;case">=":return r>=0;case"<=":return r<=0}}function Ve(e,t){for(let r of t)if(!ao(e,r))return!1;if(e.prerelease&&e.prerelease.length>0){for(let r of t){if(de(r))continue;let{major:o,minor:n,patch:s,prerelease:i}=r;if(i&&i.length>0&&e.major===o&&e.minor===n&&e.patch===s)return!0}return!1}return!0}function Ke(e,t){return t.some(r=>Ve(e,r))}var Xe={major:Number.NaN,minor:Number.NaN,patch:Number.NaN,prerelease:[],build:[]},Ee={operator:void 0,...Xe};function mr(e,t){return Y(e,t)>0}function Ot(e,t){let r;for(let o of e)Ke(o,t)&&(r=r&&mr(r,o)?r:o);return r}function co(e){let r=e.match(ur)?.groups;if(!r)return null;let{operator:o,prerelease:n,buildmetadata:s}=r,i=r.major?{major:ce(r.major,`Cannot parse comparator ${e}: invalid major version`),minor:ce(r.minor,`Cannot parse comparator ${e}: invalid minor version`),patch:ce(r.patch,`Cannot parse comparator ${e}: invalid patch version`),prerelease:n?G(n):[],build:s?te(s):[]}:Xe;return{operator:o||void 0,...i}}function E(e){return!e||e.toLowerCase()==="x"||e==="*"}function po(e){if(!E(e.major))return E(e.minor)?{operator:">=",major:+e.major,minor:0,patch:0,prerelease:[],build:[]}:E(e.patch)?{operator:">=",major:+e.major,minor:+e.minor,patch:0,prerelease:[],build:[]}:{operator:">=",major:+e.major,minor:+e.minor,patch:+e.patch,prerelease:e.prerelease?G(e.prerelease):[],build:[]}}function lo(e){if(!E(e.major))return E(e.minor)?{operator:"<",major:+e.major+1,minor:0,patch:0,prerelease:[],build:[]}:E(e.patch)?{operator:"<",major:+e.major,minor:+e.minor+1,patch:0,prerelease:[],build:[]}:e.prerelease?{operator:"<=",major:+e.major,minor:+e.minor,patch:+e.patch,prerelease:G(e.prerelease),build:[]}:{operator:"<=",major:+e.major,minor:+e.minor,patch:+e.patch,prerelease:[],build:[]}}function uo(e){let t=e.match(new RegExp(`^${Ge}`)),r=t?.groups;if(!r)return null;let o=t[0].length,n=e.slice(o).match(/^\s+-\s+/);if(!n)return null;let s=n[0].length,a=e.slice(o+s).match(new RegExp(`^${Ge}\\s*$`))?.groups;if(!a)return null;let c=po(r),p=lo(a);return[c,p].filter(Boolean)}function mo(e){let t=E(e.major),r=E(e.minor),o=E(e.patch),n=+e.major,s=+e.minor,i=+e.patch;if(t)return[Ee];if(r)return[{operator:">=",major:n,minor:0,patch:0},{operator:"<",major:n+1,minor:0,patch:0}];if(o)return n===0?[{operator:">=",major:n,minor:s,patch:0},{operator:"<",major:n,minor:s+1,patch:0}]:[{operator:">=",major:n,minor:s,patch:0},{operator:"<",major:n+1,minor:0,patch:0}];let a=G(e.prerelease??"");return n===0?s===0?[{operator:">=",major:n,minor:s,patch:i,prerelease:a},{operator:"<",major:n,minor:s,patch:i+1}]:[{operator:">=",major:n,minor:s,patch:i,prerelease:a},{operator:"<",major:n,minor:s+1,patch:0}]:[{operator:">=",major:n,minor:s,patch:i,prerelease:a},{operator:"<",major:n+1,minor:0,patch:0}]}function fo(e){let t=E(e.major),r=E(e.minor),o=E(e.patch),n=+e.major,s=+e.minor,i=+e.patch;if(t)return[Ee];if(r)return[{operator:">=",major:n,minor:0,patch:0},{operator:"<",major:n+1,minor:0,patch:0}];if(o)return[{operator:">=",major:n,minor:s,patch:0},{operator:"<",major:n,minor:s+1,patch:0}];let a=G(e.prerelease??"");return[{operator:">=",major:n,minor:s,patch:i,prerelease:a},{operator:"<",major:n,minor:s+1,patch:0}]}function ho(e){let t=E(e.major),r=E(e.minor),o=E(e.patch),n=+e.major,s=+e.minor,i=+e.patch;if(t)return[{operator:"<",major:0,minor:0,patch:0}];if(r)return o?[{operator:"<",major:n,minor:0,patch:0}]:[{operator:"<",major:n,minor:0,patch:0}];if(o)return[{operator:"<",major:n,minor:s,patch:0}];let a=G(e.prerelease??""),c=te(e.build??"");return[{operator:"<",major:n,minor:s,patch:i,prerelease:a,build:c}]}function go(e){let t=E(e.minor),r=E(e.patch),o=+e.major,n=+e.minor,s=+e.patch;if(t)return r?[{operator:"<",major:o+1,minor:0,patch:0}]:[{operator:"<",major:o,minor:n+1,patch:0}];if(r)return[{operator:"<",major:o,minor:n+1,patch:0}];let i=G(e.prerelease??""),a=te(e.build??"");return[{operator:"<=",major:o,minor:n,patch:s,prerelease:i,build:a}]}function _o(e){let t=E(e.major),r=E(e.minor),o=E(e.patch),n=+e.major,s=+e.minor,i=+e.patch;if(t)return[{operator:"<",major:0,minor:0,patch:0}];if(r)return[{operator:">=",major:n+1,minor:0,patch:0}];if(o)return[{operator:">=",major:n,minor:s+1,patch:0}];let a=G(e.prerelease??""),c=te(e.build??"");return[{operator:">",major:n,minor:s,patch:i,prerelease:a,build:c}]}function xo(e){let t=E(e.major),r=E(e.minor),o=E(e.patch),n=+e.major,s=+e.minor,i=+e.patch;if(t)return[Ee];if(r)return o?[{operator:">=",major:n,minor:0,patch:0}]:[{operator:">=",major:n,minor:0,patch:0}];if(o)return[{operator:">=",major:n,minor:s,patch:0}];let a=G(e.prerelease??""),c=te(e.build??"");return[{operator:">=",major:n,minor:s,patch:i,prerelease:a,build:c}]}function yo(e){let t=E(e.major),r=E(e.minor),o=E(e.patch),n=+e.major,s=+e.minor,i=+e.patch;if(t)return[Ee];if(r)return[{operator:">=",major:n,minor:0,patch:0},{operator:"<",major:n+1,minor:0,patch:0}];if(o)return[{operator:">=",major:n,minor:s,patch:0},{operator:"<",major:n,minor:s+1,patch:0}];let a=G(e.prerelease??""),c=te(e.build??"");return[{operator:void 0,major:n,minor:s,patch:i,prerelease:a,build:c}]}function bo(e){let t=e.match(lr)?.groups;if(!t)return co(e);switch(t.operator){case"^":return mo(t);case"~":case"~>":return fo(t);case"<":return ho(t);case"<=":return go(t);case">":return _o(t);case">=":return xo(t);case"=":case"":return yo(t);default:throw new Error(`Cannot parse version range: '${t.operator}' is not a valid operator`)}}function Po(e){return e.split(/\s+/).flatMap(bo)}function Ye(e){let t=e.replaceAll(/(?<=<|>|=|~|\^)(\s+)/g,"").split(/\s*\|\|\s*/).map(r=>uo(r)||Po(r));if(t.some(r=>r.includes(null)))throw new TypeError(`Cannot parse version range: range "${e}" is invalid`);return t}function Oe(e){if(typeof e!="string")throw new TypeError(`Cannot parse version as version must be a string: received ${typeof e}`);if(e.length>It)throw new TypeError(`Cannot parse version as version length is too long: length is ${e.length}, max length is ${It}`);e=e.trim();let t=e.match(cr)?.groups;if(!t)throw new TypeError(`Cannot parse version: ${e}`);let r=ce(t.major,`Cannot parse version ${e}: invalid major version`),o=ce(t.minor,`Cannot parse version ${e}: invalid minor version`),n=ce(t.patch,`Cannot parse version ${e}: invalid patch version`),s=t.prerelease?G(t.prerelease):[],i=t.buildmetadata?te(t.buildmetadata):[];return{major:r,minor:o,patch:n,prerelease:s,build:i}}var fe=e=>(B(e)??"relative")!=="relative",he={redirect:"follow",cache:"force-cache"},ge=A(y(tr(Ne(),!0))),Je=Ie(ge,fe),je=()=>{};var dr=(e,t)=>{e=oe(e);let r=t[e];if(r)return r;let o=nt(t).filter(n=>n.endsWith("/")).toSorted((n,s)=>s.length-n.length);for(let n of o)if(e.startsWith(n)){let s=t[n];if(!s.endsWith("/"))throw new Error(`the value ("${s}") of the matched import-map key ("${n}") for the path alias "${e}" MUST end with a trailing slash ("/") to be specification compliant.`);return e.replace(n,s)}},qe=([e,t],[r,o])=>r.length-e.length,Eo={baseAliasDir:"",basePathDir:"",sort:!0,errorCheck:!0},Ze=(e,t,r)=>{let{baseAliasDir:o,basePathDir:n,errorCheck:s,sort:i}={...Eo,...r};o=Ue(o,"/")??o,n=Ue(n,"/")??n;let a=se(oe(e),o),c=a===""||o!==""&&a?.startsWith("/")?"."+a:a;if(c===void 0)return Ze(e,t,{baseAliasDir:"",basePathDir:n,errorCheck:s,sort:i});i&&(t=t.toSorted(qe));for(let[p,u]of t){let l=se(c,p);if(l!==void 0){if(s&&p.endsWith("/")&&!u.endsWith("/"))throw new Error(`the value ("${u}") of the matched import-map key ("${p}") for the path alias "${e}" MUST end with a trailing slash ("/") to be specification compliant.`);let g=n===""||fe(u)?u:ie(A(n),u);if(l==="")return g;if(p.endsWith("/"))return ie(g,me(l))}}};var Re=class{packagePath;packageInfo;constructor(t,r){this.packageInfo=t,this.packagePath=r}getPath(){return this.packagePath}resolveExport(t,r){return Ze(t,this.exportMapSortedEntries,{sort:!1,...r})}resolveImport(t,r){return Ze(t,this.importMapSortedEntries,{sort:!1,...r})}static async fromUrl(t){t=D(t,Je());let r=vt(await(await fetch(t,he)).text());return new this(r,t.href)}};var fr=e=>oe(e.endsWith("/")?e:e+"/../"),ve=class extends Re{importMapSortedEntries;exportMapSortedEntries;getName(){return this.packageInfo.name}getVersion(){return this.packageInfo.version}getPath(){let t=this.packagePath;return t||`${jt}/${this.getName()}/${this.getVersion()}/deno.json`}constructor(t,r){super(t,r);let{exports:o={},imports:n={}}=t,s=j(o)?o.endsWith("/")?{"./":o}:{".":o}:o,i={...n};for(let[a,c]of q(i)){let p=A(a);a!==p&&!(p in i)&&(i[p]=A(c))}this.exportMapSortedEntries=q(s).toSorted(qe),this.importMapSortedEntries=q(i).toSorted(qe)}resolveExport(t,r){let o=this.getName(),n=this.getVersion(),s=y(this.getPath()),{baseAliasDir:i=`jsr:${o}@${n}`,basePathDir:a=fr(s),...c}=r??{},p=se(t,i)?.replace(/^\/+/,"/");return p!==void 0&&(t=i+(p==="/"?"":p)),super.resolveExport(t,{baseAliasDir:i,basePathDir:a,...c})}resolveImport(t,r){let o=this.getName(),n=this.getVersion(),s=y(this.getPath()),i=fr(s),a=t.startsWith("./")||t.startsWith("../"),c=a?[""]:[`jsr:${o}@${n}`,`jsr:${o}`,`${o}`],p;for(let u of c)if(p=this.resolveExport(t,{...r,baseAliasDir:u}),p)break;return p??super.resolveImport(t,{...r,basePathDir:i})}static async fromUrl(t){if((j(t)?t:t.href).startsWith("jsr:")){let{host:n}=X(t);t=await vo(`jsr:${n}`)}return super.fromUrl(t)}},jt="https://jsr.io",Ro=async e=>{let{protocol:t,scope:r,pkg:o,pathname:n,version:s}=X(e);if(t!=="jsr:")throw new Error(`expected path protocol to be "jsr:", found "${t}" instead, for package: "${e}"`);if(!r)throw new Error(`expected jsr package to contain a scope, but found "${r}" instead, for package: "${e}"`);let i=D(`@${r}/${o}/meta.json`,jt),a=await(await fetch(i,he)).json(),c=q(a.versions).filter(([v,{yanked:R}])=>!R).map(([v])=>Oe(v)),p=Ot(c,Ye(s??a.latest));if(!p)throw new Error(`failed to find the desired version "${s}" of the jsr package "${e}", with available versions "${_e(a.versions)}"`);let u=He(p),l=D(`@${r}/${o}/${u}/`,jt),g=D("./deno.json",l),_=D("./deno.jsonc",l),d=D("./jsr.json",l),N=D("./jsr.jsonc",l),J=D("./package.json",l),W=D("./package.jsonc",l),$=[g,_,d,N];for(let v of $)if((await fetch(v,{...he,method:"HEAD"})).ok)return v;throw new Error(`Network Error: couldn't locate "${e}"'s package json file. searched in the following locations:
${_e($)}`)},vo=Et(Ro);var Z=[void 0,"","file"],Dt=["base64","binary","copy","css","dataurl","default","empty","file","js","json","jsx","local-css","text","ts","tsx"],Qe=(r=>(r[r.CWD=0]="CWD",r[r.ABS_WORKING_DIR=1]="ABS_WORKING_DIR",r))(Qe||{});var wo={filters:[/.*/],initialPluginData:void 0,forceInitialPluginData:!1,enableInheritPluginData:!0,acceptNamespaces:Z},So=e=>{let{filters:t,initialPluginData:r,forceInitialPluginData:o,enableInheritPluginData:n,acceptNamespaces:s}={...wo,...e},i=new Set([...s,"oazmi-loader-http"]),a=new Map,c=le(a),p=ye(a),u=xe(a),l=Symbol("[oazmi-entry]: already captured by initial-data-injector"),g=Symbol("[oazmi-entry]: already captured by inherit-data-injector"),_=Symbol("[oazmi-entry]: already captured by absolute-path-resolver");return async d=>{let{runtimePackage:N,...J}=r??{},W=J,$=r!==void 0;d.onStart(async()=>{W.runtimePackage=await Co(d,N)});let v=async w=>{let{path:O,pluginData:x,...h}=w,{kind:b,namespace:I}=h;if(b!=="entry-point"||(x??{})[l]||!i.has(I)||x!==void 0&&!o)return;let P=o==="merge"?{...W,...x,[l]:!0}:{...W,[l]:!0},k=await d.resolve(O,{...h,pluginData:P});return k.pluginData??=P,k},R=async w=>{let{path:O,pluginData:x,...h}=w,{importer:b="",namespace:I}=h;if((x??{})[g]||!i.has(I))return;if(x==null&&b!==""){let L=c(y(b));return L?R({...h,path:O,pluginData:L}):void 0}let P={...x,[g]:!0},k=await d.resolve(O,{...h,pluginData:P}),H={...k.pluginData??P,[g]:!1};if(H.resolverConfig?.useInheritPluginData!==!1){let L=y(k.path);u(L)||p(y(k.path),H)}return k.pluginData=H,k},U=async w=>{if((w.pluginData??{})[_]||!i.has(w.namespace))return;let{path:O,namespace:x,...h}=w,b=await d.resolve(O,{...h,namespace:"oazmi-resolver-pipeline"}),{path:I,pluginData:P={},namespace:k}=b,H={...P,[_]:!0},L=await d.resolve(I,{...h,namespace:x,pluginData:H});return L.pluginData={...L.pluginData??H,[_]:!1},L};for(let w of t)$&&d.onResolve({filter:w},v),n&&d.onResolve({filter:w},R),d.onResolve({filter:w},U)}},kt=e=>({name:"oazmi-entry",setup:So(e)}),Co=async(e,t)=>{let r=t!==void 0,o=t instanceof Re,n=!r||o?void 0:j(t)?D((await e.resolve(t,{kind:"entry-point",namespace:"oazmi-resolver-pipeline",pluginData:{resolverConfig:{useNodeModules:!1}}})).path):t;return r?o?t:await ve.fromUrl(n):void 0};var hr={base64:[],binary:[".bin",".dat"],copy:[],css:[".css"],dataurl:[],default:[],empty:[],file:[".jpg",".jpeg",".png",".gif",".svg",".webp",".bmp",".tiff",".ico",".mp4",".webm",".ogg",".avi",".mp3",".wav",".aac"],js:[".js",".mjs",".cjs"],json:[".json"],jsx:[".jsx"],"local-css":[".module.css"],text:[".txt",".html",".md",".xml",".csv"],ts:[".ts"],tsx:[".tsx"]};var gr={base64:["application/octet-stream","application/base64"],binary:["application/octet-stream","application/binary","application/x-binary","image/vnd.microsoft.icon"],copy:["application/octet-stream","application/x-copy"],css:["text/css"],dataurl:["application/data-url","text/data-url"],default:[],empty:[],file:["application/octet-stream","application/x-file","image/jpeg","image/png","image/gif","image/svg+xml","image/webp","image/bmp","image/tiff","image/vnd.microsoft.icon","video/mp4","video/webm","video/ogg","video/x-msvideo","audio/mpeg","audio/ogg","audio/wav","audio/x-aac","audio/webm"],js:["application/javascript","text/javascript","application/x-javascript","application/ecmascript","text/ecmascript"],json:["application/json","text/json"],jsx:["application/javascript","text/javascript","application/jsx"],"local-css":["text/css","text/x-css"],text:["text/plain","text/html","text/markdown","text/xml","text/csv"],ts:["application/typescript","text/typescript"],tsx:["application/typescript","text/typescript","application/tsx"]};var Io=q(gr).map(([e,t])=>[e,new Set(t)]),No=q(hr).map(([e,t])=>[e,new Set(t)]),Oo=new be(new Map(Io)),jo=new be(new Map(No)),Do=e=>{let[t,...r]=e.split(";"),o=t.trim().toLowerCase();return Oo.rget(o)},Ao=e=>{let t=e.endsWith(".module.css")?".module.css":yt(e).extname;return jo.rget(t)},_r=e=>{let{headers:t,url:r}=e,o=t.get("content-type")??"",n=Do(o)??new Set,s=Ao(r)??new Set,i=n.intersection(s);return i.size<=0&&(i=s),i.size<=0&&(i=n),i};var Q=console.log,ko=e=>{let t=Ce(e);return(...r)=>{t(r)}},xr=[],Lo=ko(xr),Mo=/^[\/\\]([a-z])\:[\/\\]/i,tt=e=>{if(j(e)){if(B(e)!=="file")return;e=new URL(e)}return e?.protocol.startsWith("file:")?y(pe(e.pathname)).replace(Mo,"$1:/"):void 0},De=e=>{let t=j(e),r=tt(e);if(!r){let o=t?B(e):"http";o!=="local"&&o!=="relative"&&Q(`[ensureLocalPath] WARNING! received non-convertible remote path: "${t?e:e.href}"`)}return r??(t?y(e):e.href)};var To=e=>{let{defaultLoader:t,acceptLoaders:r=Dt,log:o=!1}=e,n=new Set(r),s=o?o===!0?Q:o:void 0;return async i=>{let{path:a,pluginData:c}=i,p=D(a),u=await fetch(p,he);if(!u.ok)throw new Error(`[urlLoaderFactory]: ERROR: network fetch response for url "${p.href}" was not ok (${u.status}). response header:
${_e(u.headers)}`);let l=_r(u),g=n.intersection(l),_=[...g].at(0)??t,d=await u.bytes();return s&&s("[urlLoaderFactory]:",{path:a,path_url:p.href,guessed_loaders:l,preferred_loader:_,args:i}),{contents:d,loader:_,pluginData:c}}},yr={enabled:!0,resolveAgain:!0},$o={filters:[/^https?\:\/\//,/^file\:\/\//],namespace:"oazmi-loader-http",acceptNamespaces:Z,defaultLoader:"copy",acceptLoaders:void 0,convertFileUriToLocalPath:yr,log:!1},Fo=(e={})=>{let{acceptLoaders:t,defaultLoader:r,filters:o,namespace:n,acceptNamespaces:s,log:i,convertFileUriToLocalPath:a}={...$o,...e},c=new Set([...s,n]),p={acceptLoaders:t,defaultLoader:r,log:i},u={...yr,...a};return async l=>{let{absWorkingDir:g,outdir:_,outfile:d,entryPoints:N,write:J,loader:W}=l.initialOptions,$=async v=>{let{path:R,pluginData:U,namespace:w,...O}=v,x=w===n?"":w;if(c.has(w))return u.enabled&&B(R)==="file"?u.resolveAgain?l.resolve(tt(R),{...O,pluginData:U,namespace:x}):{path:tt(R),pluginData:U,namespace:x}:{path:R,pluginData:U,namespace:n}};o.forEach(v=>{l.onResolve({filter:v},$)}),l.onLoad({filter:/.*/,namespace:n},To(p))}},Lt=e=>({name:"oazmi-http-plugin",setup:Fo(e)});var Uo={filters:[/^jsr\:/],acceptNamespaces:Z},Wo=(e={})=>{let{filters:t,acceptNamespaces:r}={...Uo,...e},o=new Set([...r,"oazmi-loader-http"]);return async n=>{let{absWorkingDir:s,outdir:i,outfile:a,entryPoints:c,write:p,loader:u}=n.initialOptions,l=async g=>{if(!o.has(g.namespace))return;let{path:_,pluginData:d={},...N}=g,{importMap:J,runtimePackage:W,resolverConfig:$={},...v}=d,R=await ve.fromUrl(_),U=X(_).pathname,w=U==="/"?".":me(U),O=R.resolveExport(w,{baseAliasDir:""});if(!O)throw new Error(`failed to resolve the path "${_}" from the deno package: "jsr:${R.getName()}@${R.getVersion()}"`);return n.resolve(O,{...N,pluginData:{...v,runtimePackage:R,resolverConfig:{...$,useNodeModules:!1}}})};t.forEach(g=>{n.onResolve({filter:g},l)})}},Mt=e=>({name:"oazmi-jsr-plugin",setup:Wo(e)});var br={enabled:!0},Pr={enabled:!0,globalImportMap:{}},Er={enabled:!0},Rr={enabled:!0,resolvePath:Je,isAbsolutePath:fe},zo={runtimePackage:br,importMap:Pr,nodeModules:Er,relativePath:Rr,namespace:"oazmi-resolver-pipeline",log:!1},Bo=e=>{let{runtimePackage:t,importMap:r,nodeModules:o,relativePath:n,namespace:s,log:i}={...zo,...e},a={...br,...t},c={...Pr,...r},p={...Er,...o},u={...Rr,...n},l=i?i===!0?Q:i:void 0,g="discard-this-namespace",_=/.*/;return async d=>{let N=y(d.initialOptions.absWorkingDir??"./"),J=a.enabled===!1?je:async x=>{if(x.pluginData?.resolverConfig?.useRuntimePackage===!1)return;let{path:h,pluginData:b={}}=x,I=b.runtimePackage,P=I&&!h.startsWith("./")&&!h.startsWith("../")?I.resolveImport(h):void 0;return l&&l(`[runtime-package] resolving: ${h}`+(P?`
>> successfully resolved to: ${P}`:"")),P?{path:P,namespace:g,pluginData:{...b}}:void 0},{globalImportMap:W}=c,$=c.enabled===!1?je:async x=>{if(x.pluginData?.resolverConfig?.useImportMap===!1)return;let{path:h,pluginData:b={}}=x,I={...W,...b.importMap},P=dr(h,I);return l&&l(`[import-map]      resolving: ${h}`+(P?`
>> successfully resolved to: ${P}`:"")),P?{path:P,namespace:g,pluginData:{...b}}:void 0},{resolvePath:v,isAbsolutePath:R}=u,U=$t({absWorkingDir:v(A(N))},d),w=p.enabled===!1?je:async x=>{let{path:h,resolveDir:b,importer:I,pluginData:P={}}=x;if(P.resolverConfig?.useNodeModules===!1||P.resolverConfig?.useRelativePath!==!1&&(h.startsWith("./")||h.startsWith("../")||R(h)))return;let k=v(A(b||N)),H=y(h),L=U({importer:I,path:H,resolveDir:k}),{path:f,namespace:S,pluginData:C,...F}=await L.catch(()=>({}));return l&&l(`[node-module]     resolving: ${h}`+(f?`
>> successfully resolved to: ${f}`:"")),f?{...F,path:f,namespace:g,pluginData:{...P}}:void 0},O=u.enabled===!1?je:async x=>{if(x.pluginData?.resolverConfig?.useRelativePath===!1)return;let{path:h,importer:b,resolveDir:I,pluginData:P={}}=x,k=v(A(I||N)),H=R(b)?b:ie(k,b),L=R(h)?y(h):v(H,me(h));return l&&l(`[absolute-path]   resolving: ${h}`+(L?`
>> successfully resolved to: ${L}`:"")),{path:L,namespace:g,pluginData:{...P}}};d.onResolve({filter:_,namespace:s},J),d.onResolve({filter:_,namespace:s},$),d.onResolve({filter:_,namespace:s},w),d.onResolve({filter:_,namespace:s},O)}},Tt=e=>({name:"oazmi-plugindata-resolvers",setup:Bo(e)}),$t=(e,t)=>{let{absWorkingDir:r}=e,o=n=>s=>{let i=Symbol(),a="the-void",{resolve:c,reject:p,resolveDir:u,importer:l=""}=n,g=B(l),_=g==="local"||g==="file"?D("./",l).href:void 0,d=_??u;d===""&&Q('[nodeModulesResolverFactory]: WARNING! received an empty resolve directory ("args.resolveDir").',`
	we will fallback to esbuild's current-working-directory for filling in the "resolveDir" value,`,`
	however, you must be using the "nodeModulesResolverFactory" function incorrectly to have encountered this situation.`,`
	remember, the purpose of this function is to scan for a node-module, starting from a directory that YOU provide.`),s.onResolve({filter:/.*/},async N=>{if(N.pluginData?.[i]===!0)return;let{path:J,external:W,namespace:$,sideEffects:v,suffix:R}=await s.resolve(De(N.path),{kind:"entry-point",resolveDir:De(d!==""?d:N.resolveDir),pluginData:{[i]:!0}});return c({path:y(J),external:W,namespace:$,sideEffects:v,suffix:R}),{path:"does-not-matter.js",namespace:a}}),s.onLoad({filter:/.*/,namespace:a},()=>({contents:"",loader:"empty"}))};return async n=>{let{path:s,resolveDir:i="",importer:a}=n,c=i===""?r??"":i,[p,u,l]=Se(),g={name:"native-esbuild-resolver-capture",setup:o({resolve:u,reject:l,resolveDir:c,importer:a})};return await t.esbuild.build({entryPoints:[s],absWorkingDir:r,bundle:!1,minify:!1,write:!1,outdir:"./temp/",plugins:[g]}).catch(()=>{l("esbuild's native resolver failed to resolve the path")}),p}};var Go={dir:1,command:e=>`npm install "${e}" --no-save`},Ho={specifiers:["npm:"],sideEffects:"auto",autoInstall:!0,acceptNamespaces:Z,nodeModulesDirs:[1],log:!1},Vo=(e={})=>{let{specifiers:t,sideEffects:r,autoInstall:o,acceptNamespaces:n,nodeModulesDirs:s,log:i}={...Ho,...e},a=i?i===!0?Q:i:void 0,c=new Set([...n,"oazmi-loader-http"]),p=j(r)?void 0:r,u=Ae(o);return re(u)&&s.unshift(u.dir),async l=>{let{absWorkingDir:g,outdir:_,outfile:d,entryPoints:N,write:J,loader:W}=l.initialOptions,$=A(ge),v=g?A(y(g)):ge,R=h=>{switch(h){case 0:return $;case 1:return v;default:return vr(h)}},U=[...new Set(s.map(R))],w=Ko(l),O=re(u)?{dir:R(u.dir),command:u.command,log:i}:u,x=h=>async b=>{if(!c.has(b.namespace))return;let{path:I,pluginData:P={},resolveDir:k="",namespace:H,...L}=b,f=se(I,h,"npm:"),{scope:S,pkg:C,pathname:F,version:ee}=X(f),z=`${S?"@"+S+"/":""}${C}${F==="/"?"":F}`,{importMap:nn,runtimePackage:sn,resolverConfig:an,...wr}=P,Ut=k===""?U:[k,...U],we=await w(z,Ut);!we&&O&&(await Qo(f,O),we=await w(z,Ut)),we||(a??Q)(`[npmPlugin]: WARNING! no valid "resolveDir" directory was found to contain the npm package named "${z}"`,`
	we will still continue with the path resolution (in case the global-import-map may alter the situation),`,`
	but it is almost guaranteed not to work if the current-working-directory was already part of the scanned directories.`);let Le=await l.resolve(z,{...L,resolveDir:we,namespace:"oazmi-resolver-pipeline",pluginData:{...wr,resolverConfig:{useRuntimePackage:!1,useImportMap:!1,useNodeModules:!0}}}),Wt=Le.path;return a&&a(`[npmPlugin]       resolving: "${I}", with resolveDir: "${we}"`+(Wt?`
>> successfully resolved to: ${Wt}`:"")),p!==void 0&&(Le.sideEffects=p),Le.namespace="",Le};t.forEach(h=>{let b=new RegExp(`^${gt(h)}`);l.onResolve({filter:b},x(h))})}},Ft=e=>({name:"oazmi-npm-plugin",setup:Vo(e)}),vr=e=>{let t=j(e)?e:e.href,r=B(t),o=oe(A(r==="relative"?ie(A(ge),t):t));switch(r){case"local":case"relative":case"file":return De(o);default:throw new Error(`expected a filesystem path, or a "file://" url, but received the incompatible uri scheme "${r}".`)}},Ko=e=>{let t=$t({absWorkingDir:void 0},e),r=async(o,n)=>((await t({path:n,importer:"",resolveDir:o})).path??"")!=="";return async(o,n)=>{let s=n.map(vr);for(let i of s)if(await r(i,o))return i}},ke=Ne(),Xo=e=>`deno cache --node-modules-dir="auto" --allow-scripts --no-config "npm:${e}"`,Yo=e=>`deno cache --node-modules-dir="auto" --no-config "npm:${e}"`,Jo=e=>`npm install "${e}" --no-save`,qo=e=>`bun install "${e}" --no-save`,Zo=e=>`pnpm install "${e}"`,Ae=e=>{if(e){if(re(e))return{...Go,...e};switch(e){case"auto":return ke===m.DENO||ke===m.BUN?"dynamic":Ae("npm");case!0:case"auto-cli":switch(ke){case m.DENO:return Ae("deno");case m.BUN:return Ae("bun");case m.NODE:return Ae("npm");default:throw new Error("ERROR! cli-installation of npm-packages is not possible on web-browser runtimes.")}case"dynamic":return"dynamic";case"deno":return{dir:1,command:Xo};case"deno-noscript":return{dir:1,command:Yo};case"bun":return{dir:1,command:qo};case"npm":return{dir:1,command:Jo};case"pnpm":return{dir:1,command:Zo};default:return}}},Qo=async(e,t)=>{switch(ke){case m.DENO:case m.BUN:case m.NODE:return t==="dynamic"?tn(e):en(e,t);default:throw new Error("ERROR! npm-package installation is not possible on web-browser runtimes.")}},en=async(e,t)=>{let{command:r,dir:o,log:n}=t,s=n?n===!0?Q:n:void 0,i=X(e.startsWith("npm:")?e:"npm:"+e),a=i.host,c=r(a);s&&s(`[npmPlugin]      installing: "${e}", in directory "${o}"
>>    using the cli-command: \`${c}\``),await bt(ke,c,{cwd:o})},tn=async e=>{let t=X(e.startsWith("npm:")?e:"npm:"+e),r=t.href.replace(/^npm\:[\/\\]*/,"npm:").slice(0,t.pathname==="/"?-1:void 0),o=`export * as myLib from "${pe(r)}"`,n=new Blob([o],{type:"text/javascript"});await import(URL.createObjectURL(n))};var rn={initialPluginData:void 0,log:!1,logFor:["npm","resolver"],autoInstall:!0,nodeModulesDirs:[1],globalImportMap:{},getCwd:ge,acceptNamespaces:Z},on=e=>{let{acceptNamespaces:t,autoInstall:r,getCwd:o,globalImportMap:n,log:s,logFor:i,nodeModulesDirs:a,initialPluginData:c}={...rn,...e},p=Ie(o,fe);return[kt({initialPluginData:c,acceptNamespaces:t}),Lt({acceptNamespaces:t,log:i.includes("http")?s:!1}),Mt({acceptNamespaces:t}),Ft({acceptNamespaces:t,autoInstall:r,log:i.includes("npm")?s:!1,nodeModulesDirs:a}),Tt({log:i.includes("resolver")?s:!1,importMap:{globalImportMap:n},relativePath:{resolvePath:p}})]};export{Qe as DIRECTORY,Dt as allEsbuildLoaders,Lo as arrayLogger,xr as arrayLoggerHistory,Z as defaultEsbuildNamespaces,on as denoPlugins,kt as entryPlugin,Lt as httpPlugin,Mt as jsrPlugin,Q as logLogger,Ft as npmPlugin,Tt as resolverPlugin};
