<!DOCTYPE html><html class="default" lang="en" data-base="."><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>@oazmi/esbuild-plugin-deno - v0.2.1</title><meta name="description" content="Documentation for @oazmi/esbuild-plugin-deno"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><link rel="stylesheet" href="assets/custom.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script><script async src="assets/hierarchy.js" id="tsd-hierarchy-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search"><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"><a href="https://github.com/oazmi/esbuild-plugin-deno">github</a><a href="esbuild-plugin-deno/">readme</a><a href="esbuild-plugin-deno/src/mod.ts">source</a><a href="esbuild-plugin-deno/examples/index.html">examples</a><a href="esbuild-plugin-deno/dist/mod">distribution</a></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">@oazmi/esbuild-plugin-deno - v0.2.1</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h1>@oazmi/esbuild-plugin-deno - v0.2.1</h1></div><div class="tsd-panel tsd-typography"><a id="oazmiesbuild-plugin-deno" class="tsd-anchor"></a><h1 class="tsd-anchor-link">@oazmi/esbuild-plugin-deno<a href="#oazmiesbuild-plugin-deno" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><p>A suite of multi-purpose esbuild plugins for bundling libraries and web-apps with Deno, Node, or Bun.
It is capable of resolving <code>file://</code>, <code>http://</code>, <code>https://</code>, <code>jsr:</code>, and <code>npm:</code> specifiers, in addition to supporting global <code>importMap</code>s, initial <code>pluginData</code> injection, and path pre-resolution.
With its non-intrusive design, it works seamlessly alongside esbuild's native resolver/loader and other plugins (including those from npm).
This means you won't face any issues with bundling non-javascript/typescript files (such as <code>.css</code>, <code>.svg</code>, etc...),
regardless of where they come from (http, jsr, or npm).</p>
<p>You may also use this library as a drop-in lightweight and cross-runtime alternative to the official <a href="https://jsr.io/@luca/esbuild-deno-loader"><code>jsr:@luca/esbuild-deno-loader</code></a> deno plugin;
That's because the plugins in this library do not rely on any javascript-runtime specific feature, apart from a soft-dependency on <code>Deno.cwd()</code>/<code>process.cwd()</code> (to query the current working directory).
This permits it portablility across any runtime environment (web, deno, node, bun, (cloudflare workers?)).</p>
<a id="upsides" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Upsides<a href="#upsides" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li>Allows native esbuild resolvers and loaders to take over whenever possible.
This means that you can bundle css files and whatnot, even if deno itself cannot make sense of such imports.</li>
<li>Plays nicely with other plugins, by not snatching resource resolution and forcing it down a single namespace.
<s>The way it works is what it &quot;unresolves&quot; its internal namespaces, and queries other plugins (and esbuild's native resolver) to try and resolve the path first, before trying to do so itself.</s>
<blockquote>
<p>TODO: update description, since it is no longer entirely true, as I now use a central pipeline of resolvers,
and the entry-plugin needs to redirect everything to it first for pre-resolution.</p>
</blockquote>
</li>
<li>Uses web-compatible APIs only (with the exception of <code>Deno.cwd()</code> or <code>process.cwd()</code>, that is otherwise replaced by a stub function on the web).</li>
</ul>
<a id="downsides" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Downsides<a href="#downsides" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li>Since this library does not utilize Deno's cache, nor does it take advantage of its semantic-versioning resolver (to figure out the best package version), bundling will probably likely take longer, and not speed up across successive builds.
(maybe I'll add a file caching mechanism in the future, but that'll require filesystem write access, which isn't practical for web-portability)</li>
<li>for npm-packages (whether or not you use the <code>npm:</code> specifier), you will currently need to install the packages to your project's <code>./node_modules/</code> folder, either via <code>npm install</code>, or <code>deno install</code> with <code>&quot;nodeModulesDir&quot;: &quot;auto&quot;</code> enabled in your <code>./deno.json</code> file.
I will be adding an auto-install feature in the future, but it will require filesystem write access,
since <a href="http://registry.npmjs.org/">npmjs.org</a> only distributes tarballs, instead of individual fetchable files,
like the way <a href="https://jsr.io/">jsr.io</a> does.</li>
</ul>
<a id="plugins-featured" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Plugins featured<a href="#plugins-featured" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li><a href="functions/plugins_filters_entry.entryPlugin.html" class="tsd-kind-function"> &quot;mod&quot;!entryPlugin</a>: provides <code>pluginData</code> to all entry-points and their dependencies,
in addition to pre-resolving all paths implicitly through the <a href="functions/plugins_resolvers.resolverPlugin.html" class="tsd-kind-function"> &quot;mod&quot;!resolverPlugin</a>.</li>
<li><a href="functions/plugins_filters_http.httpPlugin.html" class="tsd-kind-function"> &quot;mod&quot;!httpPlugin</a>: provides <code>http://</code>, <code>https://</code>, and <code>file://</code> path-resolving and resource-fetching loader.</li>
<li><a href="functions/plugins_filters_jsr.jsrPlugin.html" class="tsd-kind-function"> &quot;mod&quot;!jsrPlugin</a>: provides a <code>jsr:</code> to <code>https://jsr.io/</code> path-resolver.</li>
<li><a href="functions/plugins_filters_npm.npmPlugin.html" class="tsd-kind-function"> &quot;mod&quot;!npmPlugin</a>: provides a resolver that strips away <code>npm:</code> specifier prefixes,
so that package-resources can be obtained from your <code>./node_modules/</code> folder.</li>
<li><a href="functions/plugins_resolvers.resolverPlugin.html" class="tsd-kind-function"> &quot;mod&quot;!resolverPlugin</a>: a namespaced plugin that provides the backbone pipeline for resolving the paths of all of the plugins above.</li>
<li><a href="functions/plugins_mod.denoPlugins.html" class="tsd-kind-function"> &quot;mod&quot;!denoPlugins</a>: cumulation of the five plugins above, so that you can bundle code that deno natively understands, free of hassles.</li>
</ul>
<a id="documentation-and-other-links" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Documentation and other links<a href="#documentation-and-other-links" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li>documentation page: <a href="https://oazmi.github.io/esbuild-plugin-deno/">https://oazmi.github.io/esbuild-plugin-deno</a>.</li>
<li>jsr release page: <a href="https://jsr.io/@oazmi/esbuild-plugin-deno/">https://jsr.io/@oazmi/esbuild-plugin-deno</a>.</li>
<li>npm release page: <a href="https://www.npmjs.com/package/@oazmi/esbuild-plugin-deno/">https://www.npmjs.com/package/@oazmi/esbuild-plugin-deno</a>.</li>
<li>github repository: <a href="https://github.com/oazmi/esbuild-plugin-deno/">https://github.com/oazmi/esbuild-plugin-deno</a>.</li>
</ul>
<a id="installation" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Installation<a href="#installation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li>for deno: <code>deno add jsr:@oazmi/esbuild-plugin-deno</code></li>
<li>for node: <code>npm install @oazmi/esbuild-plugin-deno --save-dev</code></li>
</ul>
<a id="example" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Example<a href="#example" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>entry point 1:</p>
<pre><code class="ts"><span class="hl-0">// file: &quot;./file_uri_entry.ts&quot;</span><br/><br/><span class="hl-1">import</span><span class="hl-2"> { </span><span class="hl-3">meshGrid</span><span class="hl-2"> } </span><span class="hl-1">from</span><span class="hl-2"> </span><span class="hl-4">&quot;2d-array-utils&quot;</span><span class="hl-2"> </span><span class="hl-0">// this alias will be resolved by the resolver-plugin&#39;s `globalImportMap` setting</span><br/><span class="hl-1">import</span><span class="hl-2"> { </span><span class="hl-3">transpose2D</span><span class="hl-2"> } </span><span class="hl-1">from</span><span class="hl-2"> </span><span class="hl-4">&quot;https://jsr.io/@oazmi/kitchensink/0.9.2/src/numericarray.ts&quot;</span><br/><span class="hl-1">import</span><span class="hl-2"> { </span><span class="hl-3">cumulativeSum</span><span class="hl-2"> } </span><span class="hl-1">from</span><span class="hl-2"> </span><span class="hl-4">&quot;npm:@oazmi/kitchensink@^0.9.5/numericarray&quot;</span><br/><span class="hl-1">import</span><span class="hl-2"> { </span><span class="hl-3">parse</span><span class="hl-2"> </span><span class="hl-1">as</span><span class="hl-2"> </span><span class="hl-3">parseJsonc</span><span class="hl-2"> } </span><span class="hl-1">from</span><span class="hl-2"> </span><span class="hl-4">&quot;jsr:@std/jsonc&quot;</span><br/><span class="hl-1">import</span><span class="hl-2"> </span><span class="hl-4">&quot;https://raw.githubusercontent.com/jenil/chota/7d780731421fc987d8f7a1c8f66c730d8573684c/src/chota.css&quot;</span><br/><span class="hl-1">import</span><span class="hl-2"> </span><span class="hl-5">*</span><span class="hl-2"> </span><span class="hl-1">as</span><span class="hl-2"> </span><span class="hl-3">http</span><span class="hl-2"> </span><span class="hl-1">from</span><span class="hl-2"> </span><span class="hl-4">&quot;node:http&quot;</span><br/><span class="hl-1">import</span><span class="hl-2"> </span><span class="hl-5">*</span><span class="hl-2"> </span><span class="hl-1">as</span><span class="hl-2"> </span><span class="hl-3">https</span><span class="hl-2"> </span><span class="hl-1">from</span><span class="hl-2"> </span><span class="hl-4">&quot;node:https&quot;</span><br/><span class="hl-3">console</span><span class="hl-2">.</span><span class="hl-6">log</span><span class="hl-2">(</span><span class="hl-4">&quot;hello world&quot;</span><span class="hl-2">, </span><span class="hl-6">transpose2D</span><span class="hl-2">([[</span><span class="hl-7">1</span><span class="hl-2">], [</span><span class="hl-7">2</span><span class="hl-2">], [</span><span class="hl-7">3</span><span class="hl-2">]]))</span><br/><span class="hl-3">console</span><span class="hl-2">.</span><span class="hl-6">log</span><span class="hl-2">(</span><span class="hl-3">http</span><span class="hl-2">.</span><span class="hl-3">Agent</span><span class="hl-2">)</span><br/><span class="hl-3">console</span><span class="hl-2">.</span><span class="hl-6">log</span><span class="hl-2">(</span><span class="hl-6">meshGrid</span><span class="hl-2">([</span><span class="hl-7">1</span><span class="hl-2">, </span><span class="hl-7">2</span><span class="hl-2">, </span><span class="hl-7">3</span><span class="hl-2">], [</span><span class="hl-7">0</span><span class="hl-2">, -</span><span class="hl-7">1</span><span class="hl-2">, -</span><span class="hl-7">2</span><span class="hl-2">, -</span><span class="hl-7">3</span><span class="hl-2">, -</span><span class="hl-7">4</span><span class="hl-2">]), </span><span class="hl-6">cumulativeSum</span><span class="hl-2">([</span><span class="hl-7">1</span><span class="hl-2">, </span><span class="hl-7">2</span><span class="hl-2">, </span><span class="hl-7">3</span><span class="hl-2">, </span><span class="hl-7">4</span><span class="hl-2">]))</span><br/><span class="hl-3">console</span><span class="hl-2">.</span><span class="hl-6">log</span><span class="hl-2">(</span><span class="hl-6">parseJsonc</span><span class="hl-2">(</span><span class="hl-4">`// file: hello-world.jsonc</span><span class="hl-8">\n</span><span class="hl-4">{ &quot;name&quot;: &quot;hello&quot;, &quot;planet&quot;: &quot;world&quot; }`</span><span class="hl-2">))</span><br/><span class="hl-1">export</span><span class="hl-2"> { </span><span class="hl-3">http</span><span class="hl-2">, </span><span class="hl-3">https</span><span class="hl-2"> }</span>
</code><button type="button">Copy</button></pre>

<p>entry point 2:</p>
<pre><code class="ts"><span class="hl-0">// file: &quot;./local_path_entry.ts&quot;</span><br/><br/><span class="hl-1">import</span><span class="hl-2"> { </span><span class="hl-3">meshGrid</span><span class="hl-2"> } </span><span class="hl-1">from</span><span class="hl-2"> </span><span class="hl-4">&quot;2d-array-utils&quot;</span><span class="hl-2"> </span><span class="hl-0">// this alias will be resolved by the resolver-plugin&#39;s `globalImportMap` setting</span><br/><span class="hl-1">import</span><span class="hl-2"> { </span><span class="hl-3">transpose2D</span><span class="hl-2"> } </span><span class="hl-1">from</span><span class="hl-2"> </span><span class="hl-4">&quot;https://jsr.io/@oazmi/kitchensink/0.9.2/src/numericarray.ts&quot;</span><br/><span class="hl-1">import</span><span class="hl-2"> { </span><span class="hl-3">cumulativeSum</span><span class="hl-2"> } </span><span class="hl-1">from</span><span class="hl-2"> </span><span class="hl-4">&quot;jsr:@oazmi/kitchensink@~0.9.2/numericarray&quot;</span><br/><span class="hl-1">import</span><span class="hl-2"> </span><span class="hl-4">&quot;https://raw.githubusercontent.com/jenil/chota/7d780731421fc987d8f7a1c8f66c730d8573684c/src/chota.css&quot;</span><br/><span class="hl-1">import</span><span class="hl-2"> </span><span class="hl-5">*</span><span class="hl-2"> </span><span class="hl-1">as</span><span class="hl-2"> </span><span class="hl-3">http</span><span class="hl-2"> </span><span class="hl-1">from</span><span class="hl-2"> </span><span class="hl-4">&quot;node:http&quot;</span><br/><span class="hl-1">import</span><span class="hl-2"> </span><span class="hl-5">*</span><span class="hl-2"> </span><span class="hl-1">as</span><span class="hl-2"> </span><span class="hl-3">https</span><span class="hl-2"> </span><span class="hl-1">from</span><span class="hl-2"> </span><span class="hl-4">&quot;node:https&quot;</span><br/><span class="hl-3">console</span><span class="hl-2">.</span><span class="hl-6">log</span><span class="hl-2">(</span><span class="hl-4">&quot;skibidi gen-z rizzing toilet seat&quot;</span><span class="hl-2">, </span><span class="hl-6">transpose2D</span><span class="hl-2">([[</span><span class="hl-7">1</span><span class="hl-2">], [</span><span class="hl-7">2</span><span class="hl-2">], [</span><span class="hl-7">3</span><span class="hl-2">]]))</span><br/><span class="hl-3">console</span><span class="hl-2">.</span><span class="hl-6">log</span><span class="hl-2">(</span><span class="hl-3">http</span><span class="hl-2">.</span><span class="hl-3">Agent</span><span class="hl-2">)</span><br/><span class="hl-3">console</span><span class="hl-2">.</span><span class="hl-6">log</span><span class="hl-2">(</span><span class="hl-6">meshGrid</span><span class="hl-2">([</span><span class="hl-7">1</span><span class="hl-2">, </span><span class="hl-7">2</span><span class="hl-2">, </span><span class="hl-7">3</span><span class="hl-2">], [</span><span class="hl-7">0</span><span class="hl-2">, -</span><span class="hl-7">1</span><span class="hl-2">, -</span><span class="hl-7">2</span><span class="hl-2">, -</span><span class="hl-7">3</span><span class="hl-2">, -</span><span class="hl-7">4</span><span class="hl-2">]), </span><span class="hl-6">cumulativeSum</span><span class="hl-2">([</span><span class="hl-7">1</span><span class="hl-2">, </span><span class="hl-7">2</span><span class="hl-2">, </span><span class="hl-7">3</span><span class="hl-2">, </span><span class="hl-7">4</span><span class="hl-2">]))</span><br/><span class="hl-1">export</span><span class="hl-2"> { </span><span class="hl-3">http</span><span class="hl-2">, </span><span class="hl-3">https</span><span class="hl-2"> }</span>
</code><button type="button">Copy</button></pre>

<p>additional remote entry points, 3 to 8:</p>
<pre><code class="ts"><span class="hl-0">// jsr-file version range:  &quot;jsr:@oazmi/kitchensink@^0.9.2/array1d&quot;</span><br/><span class="hl-0">// fake-http-alias:         &quot;https://2d-lib&quot;</span><br/><span class="hl-0">// importmap-alias:         &quot;2d-array-utils&quot;</span><br/><span class="hl-0">// jsr-file latest version: &quot;jsr:@oazmi/kitchensink/struct&quot;</span><br/><span class="hl-0">// npm-file any version:    &quot;npm:@oazmi/kitchensink/stringman&quot;</span><br/><span class="hl-0">// http-file:               &quot;https://raw.githubusercontent.com/jenil/chota/7d780731421fc987d8f7a1c8f66c730d8573684c/src/chota.css&quot;</span><br/><span class="hl-0">// npm-library with deps:   &quot;npm:d3-brush@3.0.0&quot;</span>
</code><button type="button">Copy</button></pre>

<p>your bundle script:</p>
<pre><code class="ts"><span class="hl-0">// file: &quot;./bundle_script.ts&quot;</span><br/><br/><span class="hl-1">import</span><span class="hl-2"> </span><span class="hl-3">esbuild</span><span class="hl-2"> </span><span class="hl-1">from</span><span class="hl-2"> </span><span class="hl-4">&quot;esbuild&quot;</span><br/><span class="hl-1">import</span><span class="hl-2"> { </span><span class="hl-3">denoPlugins</span><span class="hl-2"> } </span><span class="hl-1">from</span><span class="hl-2"> </span><span class="hl-4">&quot;@oazmi/esbuild-plugin-deno&quot;</span><br/><br/><span class="hl-5">const</span><span class="hl-2"> </span><span class="hl-9">entry_points</span><span class="hl-2"> = [</span><br/><span class="hl-2">	</span><span class="hl-4">&quot;./local_path_entry.ts&quot;</span><span class="hl-2">, </span><span class="hl-0">// this will be loaded by esbuild natively (although it will initially pass though the `entry_plugin`&#39;s resolver pipeline)</span><br/><span class="hl-2">	</span><span class="hl-4">&quot;file://&quot;</span><span class="hl-2"> + </span><span class="hl-1">import</span><span class="hl-2">.</span><span class="hl-3">meta</span><span class="hl-2">.</span><span class="hl-3">dirname</span><span class="hl-2"> + </span><span class="hl-4">&quot;/file_uri_entry.ts&quot;</span><span class="hl-2">, </span><span class="hl-0">// this will be resolved and loaded by our `http_plugin`</span><br/><span class="hl-2">	</span><span class="hl-4">&quot;jsr:@oazmi/kitchensink@^0.9.2/array1d&quot;</span><span class="hl-2">, </span><span class="hl-0">// this will be resolved by our `jsr_plugin`, and loaded by the `http_plugin`</span><br/><span class="hl-2">	</span><span class="hl-4">&quot;https://2d-lib&quot;</span><span class="hl-2">, </span><span class="hl-0">// this will bundle via our `importMap` setting inside of the `entry_plugin`&#39;s `initialPluginData`</span><br/><span class="hl-2">	</span><span class="hl-4">&quot;2d-array-utils&quot;</span><span class="hl-2">, </span><span class="hl-0">// this will bundle via our `globalImportMap` setting inside of our `resolvers_pipeline_plugin`</span><br/><span class="hl-2">	</span><span class="hl-4">&quot;jsr:@oazmi/kitchensink/struct&quot;</span><span class="hl-2">, </span><span class="hl-0">// this will be resolved to the latest version of the package by our `jsr_plugin`</span><br/><span class="hl-2">	</span><span class="hl-4">&quot;npm:@oazmi/kitchensink/stringman&quot;</span><span class="hl-2">, </span><span class="hl-0">// this will be resolved to whatever-is-available-version of the package (in the `node_modules` directory) by our `npm_plugin`</span><br/><span class="hl-2">	</span><span class="hl-4">&quot;https://raw.githubusercontent.com/jenil/chota/7d780731421fc987d8f7a1c8f66c730d8573684c/src/chota.css&quot;</span><span class="hl-2">, </span><span class="hl-0">// `http_plugin` resolution and loading</span><br/><span class="hl-2">	</span><span class="hl-4">&quot;npm:d3-brush@3.0.0&quot;</span><span class="hl-2">, </span><span class="hl-0">// this will be auto-installed by our `npm_plugin`, without modifying/creating a &quot;package.json&quot; file.</span><br/><span class="hl-2">].</span><span class="hl-6">map</span><span class="hl-2">((</span><span class="hl-3">path</span><span class="hl-2">) </span><span class="hl-5">=&gt;</span><span class="hl-2"> ({</span><br/><span class="hl-2">	</span><span class="hl-3">in:</span><span class="hl-2"> </span><span class="hl-3">path</span><span class="hl-2">,</span><br/><span class="hl-2">	</span><span class="hl-3">out:</span><span class="hl-2"> </span><span class="hl-4">&quot;entry-&quot;</span><span class="hl-2"> + </span><span class="hl-3">path</span><span class="hl-2">.</span><span class="hl-6">replace</span><span class="hl-2">(</span><span class="hl-10">/</span><span class="hl-11">^</span><span class="hl-10">npm</span><span class="hl-8">\:</span><span class="hl-10">/</span><span class="hl-2">, </span><span class="hl-4">&quot;&quot;</span><span class="hl-2">).</span><span class="hl-6">split</span><span class="hl-2">(</span><span class="hl-4">&quot;/&quot;</span><span class="hl-2">).</span><span class="hl-6">at</span><span class="hl-2">(-</span><span class="hl-7">1</span><span class="hl-2">)!.</span><span class="hl-6">replace</span><span class="hl-2">(</span><span class="hl-10">/</span><span class="hl-8">\.</span><span class="hl-10">.</span><span class="hl-12">*</span><span class="hl-11">$</span><span class="hl-10">/</span><span class="hl-2">, </span><span class="hl-4">&quot;&quot;</span><span class="hl-2">),</span><br/><span class="hl-2">}))</span><br/><br/><span class="hl-5">const</span><span class="hl-2"> [</span><span class="hl-9">entry_plugin</span><span class="hl-2">, </span><span class="hl-9">http_plugin</span><span class="hl-2">, </span><span class="hl-9">jsr_plugin</span><span class="hl-2">, </span><span class="hl-9">npm_plugin</span><span class="hl-2">, </span><span class="hl-9">resolver_pipeline_plugin</span><span class="hl-2">] = </span><span class="hl-6">denoPlugins</span><span class="hl-2">({</span><br/><span class="hl-2">	</span><span class="hl-0">// notice that the different aliases in `globalImportMap` and `pluginData.importMap` point to the same resource.</span><br/><span class="hl-2">	</span><span class="hl-0">// however, in bundled code-splitting enabled output, there will be no duplication of this resource.</span><br/><span class="hl-2">	</span><span class="hl-3">globalImportMap:</span><span class="hl-2"> { </span><span class="hl-4">&quot;2d-array-utils&quot;</span><span class="hl-3">:</span><span class="hl-2"> </span><span class="hl-4">&quot;https://jsr.io/@oazmi/kitchensink/0.9.2/src/array2d.ts&quot;</span><span class="hl-2"> },</span><br/><span class="hl-2">	</span><span class="hl-3">pluginData:</span><span class="hl-2"> {</span><br/><span class="hl-2">		</span><span class="hl-0">// (optional) provide the path to your &quot;deno.json&quot; file, relative to esbuild&#39;s `absWorkingDir` build-option.</span><br/><span class="hl-2">		</span><span class="hl-0">// if `absWorkingDir` is unavailable, then it will be resolved relative to `Deno.cwd()`.</span><br/><span class="hl-2">		</span><span class="hl-3">runtimePackage:</span><span class="hl-2"> </span><span class="hl-4">&quot;./deno.json&quot;</span><span class="hl-2">,</span><br/><span class="hl-2">		</span><span class="hl-0">// here, we specify that we do not wish to allow node-path-resolution by default at the top level.</span><br/><span class="hl-2">		</span><span class="hl-0">// however, once we enter an npm-package&#39;s scope through the use of the `&quot;npm:&quot;` specifier in the import,</span><br/><span class="hl-2">		</span><span class="hl-0">// the switch will be flicked to `true`, and all of that package&#39;s imports will utilize node-path-resolution.</span><br/><span class="hl-2">		</span><span class="hl-0">// we leave it off initially for deno projects, since the usage of npm-specifiers is the norm,</span><br/><span class="hl-2">		</span><span class="hl-0">// but for node projects, leave it enabled (which is the default by the way).</span><br/><span class="hl-2">		</span><span class="hl-0">// the downside of it being enabled is that your filesystem will be read for resolving each resource&#39;s path (which is slow).</span><br/><span class="hl-2">		</span><span class="hl-3">resolverConfig:</span><span class="hl-2"> { </span><span class="hl-3">useNodeModules:</span><span class="hl-2"> </span><span class="hl-5">false</span><span class="hl-2"> },</span><br/><span class="hl-2">		</span><span class="hl-0">// this import-map only lingers around at the top-level scope.</span><br/><span class="hl-2">		</span><span class="hl-0">// once this plugin traverses into the domain of another self-contained package (such as an npm/jsr-package),</span><br/><span class="hl-2">		</span><span class="hl-0">// then this import-map will be cleared. (i.e. it will not affect other packages&#39; scopes)</span><br/><span class="hl-2">		</span><span class="hl-3">importMap:</span><span class="hl-2"> { </span><span class="hl-4">&quot;https://2d-lib&quot;</span><span class="hl-3">:</span><span class="hl-2"> </span><span class="hl-4">&quot;https://jsr.io/@oazmi/kitchensink/0.9.2/src/array2d.ts&quot;</span><span class="hl-2"> },</span><br/><span class="hl-2">	},</span><br/><span class="hl-2">	</span><span class="hl-0">// enabling logging will let you see which resources are being resolved, and what their resolved path is.</span><br/><span class="hl-2">	</span><span class="hl-3">log:</span><span class="hl-2"> </span><span class="hl-5">true</span><span class="hl-2">,</span><br/><span class="hl-2">	</span><span class="hl-0">// auto-install npm-packages that have not been cached into a local &quot;./node_modules/&quot; directory.</span><br/><span class="hl-2">	</span><span class="hl-3">autoInstall:</span><span class="hl-2"> </span><span class="hl-5">true</span><span class="hl-2">,</span><br/><span class="hl-2">})</span><br/><br/><span class="hl-5">const</span><span class="hl-2"> </span><span class="hl-9">result</span><span class="hl-2"> = </span><span class="hl-1">await</span><span class="hl-2"> </span><span class="hl-3">esbuild</span><span class="hl-2">.</span><span class="hl-6">build</span><span class="hl-2">({</span><br/><span class="hl-2">	</span><span class="hl-3">absWorkingDir:</span><span class="hl-2"> </span><span class="hl-1">import</span><span class="hl-2">.</span><span class="hl-3">meta</span><span class="hl-2">.</span><span class="hl-3">dirname</span><span class="hl-2">,</span><br/><span class="hl-2">	</span><span class="hl-3">entryPoints:</span><span class="hl-2"> </span><span class="hl-3">entry_points</span><span class="hl-2">,</span><br/><span class="hl-2">	</span><span class="hl-3">outdir:</span><span class="hl-2"> </span><span class="hl-4">&quot;./dist/&quot;</span><span class="hl-2">,</span><br/><span class="hl-2">	</span><span class="hl-3">format:</span><span class="hl-2"> </span><span class="hl-4">&quot;esm&quot;</span><span class="hl-2">,</span><br/><span class="hl-2">	</span><span class="hl-3">platform:</span><span class="hl-2"> </span><span class="hl-4">&quot;node&quot;</span><span class="hl-2">, </span><span class="hl-0">// needed due to dependency on &quot;node:http&quot; in two of the entry point files</span><br/><span class="hl-2">	</span><span class="hl-3">splitting:</span><span class="hl-2"> </span><span class="hl-5">true</span><span class="hl-2">,</span><br/><span class="hl-2">	</span><span class="hl-3">bundle:</span><span class="hl-2"> </span><span class="hl-5">true</span><span class="hl-2">,</span><br/><span class="hl-2">	</span><span class="hl-3">minifySyntax:</span><span class="hl-2"> </span><span class="hl-5">true</span><span class="hl-2">,</span><br/><span class="hl-2">	</span><span class="hl-3">treeShaking:</span><span class="hl-2"> </span><span class="hl-5">true</span><span class="hl-2">,</span><br/><span class="hl-2">	</span><span class="hl-3">write:</span><span class="hl-2"> </span><span class="hl-5">false</span><span class="hl-2">,</span><br/><span class="hl-2">	</span><span class="hl-3">metafile:</span><span class="hl-2"> </span><span class="hl-5">true</span><span class="hl-2">,</span><br/><span class="hl-2">	</span><span class="hl-3">plugins:</span><span class="hl-2"> [</span><span class="hl-3">entry_plugin</span><span class="hl-2">, </span><span class="hl-3">http_plugin</span><span class="hl-2">, </span><span class="hl-3">jsr_plugin</span><span class="hl-2">, </span><span class="hl-3">npm_plugin</span><span class="hl-2">, </span><span class="hl-3">resolver_pipeline_plugin</span><span class="hl-2">],</span><br/><span class="hl-2">})</span><br/><br/><span class="hl-3">console</span><span class="hl-2">.</span><span class="hl-6">log</span><span class="hl-2">(</span><span class="hl-4">&quot;bundled file list:&quot;</span><span class="hl-2">)</span><br/><span class="hl-3">console</span><span class="hl-2">.</span><span class="hl-6">log</span><span class="hl-2">(</span><span class="hl-3">result</span><span class="hl-2">.</span><span class="hl-3">outputFiles</span><span class="hl-2">.</span><span class="hl-6">map</span><span class="hl-2">((</span><span class="hl-3">v</span><span class="hl-2">) </span><span class="hl-5">=&gt;</span><span class="hl-2"> (</span><span class="hl-3">v</span><span class="hl-2">.</span><span class="hl-3">path</span><span class="hl-2">)))</span><br/><span class="hl-1">await</span><span class="hl-2"> </span><span class="hl-3">esbuild</span><span class="hl-2">.</span><span class="hl-6">stop</span><span class="hl-2">()</span>
</code><button type="button">Copy</button></pre>

<p>expected resulting bundled list of files:</p>
<pre><code class="txt">bundled file list:
[
	&quot;./dist/entry-local_path_entry.js&quot;,
	&quot;./dist/entry-file_uri_entry.js&quot;,
	&quot;./dist/entry-d3-brush@3.0.js&quot;,
	&quot;./dist/chunk-VVE7K4TT.js&quot;,
	&quot;./dist/entry-array1d.js&quot;,
	&quot;./dist/entry-2d-lib.js&quot;,
	&quot;./dist/entry-2d-array-utils.js&quot;,
	&quot;./dist/chunk-33JDUUI4.js&quot;,
	&quot;./dist/entry-struct.js&quot;,
	&quot;./dist/chunk-LPVSUOTJ.js&quot;,
	&quot;./dist/chunk-TECORZCN.js&quot;,
	&quot;./dist/entry-stringman.js&quot;,
	&quot;./dist/chunk-RL3GSOWM.js&quot;,
	&quot;./dist/entry-local_path_entry.css&quot;,
	&quot;./dist/entry-file_uri_entry.css&quot;,
	&quot;./dist/entry-chota.css&quot;
]
</code><button type="button">Copy</button></pre>

<a id="what-is-deno" class="tsd-anchor"></a><h2 class="tsd-anchor-link">What is Deno?<a href="#what-is-deno" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Eons ago, when man relied on <code>require</code> statements, and chanted <code>&quot;use-strict&quot;</code> to ward off chaos;
modules were tangled, compatibility was bound to localhost, lock files were an afterthought,
and non-asynchronicity lead to a maddening proliferation of child-processes.</p>
<p>For 5000 years, no one dared to envision an alternate runtime, grounded in simplicity.</p>
<p>It was never to happen, and for 5000 years, it never did.</p>
<p>Until one fateful day, the mastermind behind Nodejs rewrote the rules,
discarding legacy quirks that had plagued generations.</p>
<p>It was never meant to happen, but after 5000 years, it did.</p>
<p>Emerging from the universal pool of developer tears came a new runtime named Deno.
And with it began the <s>Shadow Games</s> Runtime Wars.</p>
<div style="max-width: min(100%, 384px);">
<p><img src="media/deno2.svg" alt="deno2">
<em><strong>Figure A</strong>: A historic sighting of Deno the Dino deprecating its former version.</em>
<em>Some believe Dino to be the <a href="https://en.wikipedia.org/wiki/Loch_Ness_Monster">Lochness monster</a>.</em>
<em>Others think it is an alphabetically sorted occurrence of Node.</em></p>
</div></div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#oazmiesbuild-plugin-deno"><span>@oazmi/esbuild-<wbr/>plugin-<wbr/>deno</span></a><ul><li><a href="#upsides"><span>Upsides</span></a></li><li><a href="#downsides"><span>Downsides</span></a></li><li><a href="#plugins-featured"><span>Plugins featured</span></a></li><li><a href="#documentation-and-other-links"><span>Documentation and other links</span></a></li><li><a href="#installation"><span>Installation</span></a></li><li><a href="#example"><span>Example</span></a></li><li><a href="#what-is-deno"><span>What is <wbr/>Deno?</span></a></li></ul></div></details></div><div class="site-menu"><nav id="tsd-sidebar-links" class="tsd-navigation"><a href="https://github.com/oazmi/esbuild-plugin-deno" class="tsd-nav-link">github</a><a href="esbuild-plugin-deno/" class="tsd-nav-link">readme</a><a href="esbuild-plugin-deno/src/mod.ts" class="tsd-nav-link">source</a><a href="esbuild-plugin-deno/examples/index.html" class="tsd-nav-link">examples</a><a href="esbuild-plugin-deno/dist/mod" class="tsd-nav-link">distribution</a></nav><nav class="tsd-navigation"><a href="modules.html">@oazmi/esbuild-plugin-deno - v0.2.1</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
