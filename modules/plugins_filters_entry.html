<!DOCTYPE html><html class="default" lang="en" data-base="../"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>plugins/filters/entry | @oazmi/esbuild-plugin-deno - v0.4.3</title><meta name="description" content="Documentation for @oazmi/esbuild-plugin-deno"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><link rel="stylesheet" href="../assets/custom.css"/><script defer src="../assets/main.js"></script><script async src="../assets/icons.js" id="tsd-icons-script"></script><script async src="../assets/search.js" id="tsd-search-script"></script><script async src="../assets/navigation.js" id="tsd-nav-script"></script><script async src="../assets/hierarchy.js" id="tsd-hierarchy-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => window.app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><a href="../index.html" class="title">@oazmi/esbuild-plugin-deno - v0.4.3</a><div id="tsd-toolbar-links"><a href="https://github.com/oazmi/esbuild-plugin-deno">github</a><a href="/esbuild-plugin-deno/">readme</a><a href="/esbuild-plugin-deno/src/mod.ts">src</a><a href="/esbuild-plugin-deno/dist/mod.js">dist</a><a href="/esbuild-plugin-deno/examples/index.html">examples</a></div><button id="tsd-search-trigger" class="tsd-widget" aria-label="Search"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-search"></use></svg></button><dialog id="tsd-search" aria-label="Search"><input role="combobox" id="tsd-search-input" aria-controls="tsd-search-results" aria-autocomplete="list" aria-expanded="true" autocapitalize="off" autocomplete="off" placeholder="Search the docs" maxLength="100"/><ul role="listbox" id="tsd-search-results"></ul><div id="tsd-search-status" aria-live="polite" aria-atomic="true"><div>Preparing search index...</div></div></dialog><a href="#" class="tsd-widget menu" id="tsd-toolbar-menu-trigger" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb" aria-label="Breadcrumb"><li><a href="" aria-current="page">plugins/filters/entry</a></li></ul><h1>Module plugins/filters/entry</h1></div><section class="tsd-panel tsd-comment"><div class="tsd-comment tsd-typography"><p>this filter plugin intercepts all entities and makes them sequentially pass through three resolvers,
so that an absolute path to the resource can be acquired in the best possible way (citation needed).</p>
<div class="tsd-alert tsd-alert-important"><div class="tsd-alert-title"><svg width="16" height="16" viewBox="0 0 16 16" aria-hidden="true"><use href="../assets/icons.svg#icon-alertImportant"></use></svg><span>Important</span></div><p>
you <strong>must</strong> include the <a href="../functions/plugins_resolvers.resolverPlugin.html" class="tsd-kind-function">resolverPlugin</a> somewhere in your esbuild build-options,
otherwise this plugin will not be able to resolve to absolute paths on its own,
and all efforts of this plugin will pretty much be for naught.</p>
</div>
<h2 id="details" class="tsd-anchor-link">details<a href="#details" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>an explanation of the operations performed by each of the three resolvers follows:</p>
<h3 id="1-initial-plugin-data-injector" class="tsd-anchor-link">1. initial plugin-data injector<a href="#1-initial-plugin-data-injector" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>this resolver simply inserts the user's <a href="../interfaces/plugins_filters_entry.EntryPluginSetupConfig.html#initialplugindata" class="tsd-kind-property">EntryPluginSetupConfig.initialPluginData</a> to <strong>all</strong> entry-points which lack an <code>args.pluginData</code>.
but when <a href="../interfaces/plugins_filters_entry.EntryPluginSetupConfig.html#forceinitialplugindata" class="tsd-kind-property">EntryPluginSetupConfig.forceInitialPluginData</a> is <code>true</code>, the entry-points with existing pluginData will be overwritten.</p>
<p>it is through this resolver that things like <a href="../interfaces/plugins_typedefs.CommonPluginData.html#importmap" class="tsd-kind-property">import-maps</a>
and the <a href="../interfaces/plugins_typedefs.CommonPluginData.html#runtimepackage" class="tsd-kind-property">deno-package-resolver</a> get inserted into the entry-point resources,
and then seeded into their dependencies.</p>
<h3 id="2-plugin-data-inheritor" class="tsd-anchor-link">2. plugin-data inheritor<a href="#2-plugin-data-inheritor" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>a fundamental problem (design choice?) with esbuild is that resource's <code>pluginData</code> <strong>does not</strong> propagate to the child-dependencies,
when esbuild's native resolvers and loaders process the resource.
this problem of stripping away valuable <code>pluginData</code> can also occur in external plugins that are not designed mindfully.</p>
<p>as a consequence, we would not be able to embed import-maps and runtime-package-resolvers that can be picked up by dependencies.</p>
<p>thus, to counteract this issue, this resolver inspects the <code>pluginData</code> of every resolved entity, stores it in a dictionary for book-keeping,
and then, when a dependency-resource comes along with its plugin-data stripped away (i.e. <code>args.pluginData === undefined</code>),
this resolver inserts its dependent's (<code>args.importer</code>) plugin-data.
in effect, this resolver permits inheritance of plugin-data when it is stripped away.</p>
<h3 id="3-absolute-path-resolution" class="tsd-anchor-link">3. absolute-path resolution<a href="#3-absolute-path-resolution" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>finally, we come to the resolver which implicitly calls the namespaced resolvers of the <a href="../functions/plugins_resolvers.resolverPlugin.html" class="tsd-kind-function">resolverPlugin</a>,
which is a pipeline that can resolve <a href="../interfaces/plugins_typedefs.CommonPluginData.html#importmap" class="tsd-kind-property">import-maps</a>,
<a href="../interfaces/plugins_typedefs.CommonPluginData.html#runtimepackage" class="tsd-kind-property">deno-packages</a>,
<a href="../functions/plugins_resolvers.nodeModulesResolverFactory.html" class="tsd-kind-function">node-packages (<code>node_modules</code>)</a>,
and perform generic path-joining, in order to get the absolute path (doesn't have to be filesystem path) to the resource.</p>
<p>most resolvers of the <a href="../functions/plugins_resolvers.resolverPlugin.html" class="tsd-kind-function">resolverPlugin</a> require <a href="../interfaces/plugins_typedefs.CommonPluginData.html" class="tsd-kind-interface"><code>pluginData</code></a> to be useful.
which is why we have to ensure its availability and inheritance through the two prior resolvers,
in order for the <a href="../functions/plugins_resolvers.resolverPlugin.html" class="tsd-kind-function">resolverPlugin</a> to be effective.</p>
<hr>
<div class="tsd-alert tsd-alert-tip"><div class="tsd-alert-title"><svg width="16" height="16" viewBox="0 0 16 16" aria-hidden="true"><use href="../assets/icons.svg#icon-alertTip"></use></svg><span>Tip</span></div><p>
while the placement order of the <a href="../functions/plugins_resolvers.resolverPlugin.html" class="tsd-kind-function">resolverPlugin</a> does not matter (invariant behavior),
placing it at the front would reduce the number of redundant <code>onResolve</code> callbacks received by this plugin,
which then need to be bounced-back to prevent an indefinite <code>onResolve</code> recursion.</p>
<p>you may wonder how this plugin does not spiral into an endless recursion of <code>onResolve</code> callbacks,
when it uses the &quot;capture-all&quot; filter that spans throughout all namespaces, meanwhile using <code>build.resove()</code>.</p>
<p>that's because upon the interception of a new entity, we insert a unique <code>symbol</code> marker into the <code>pluginData</code>,
which when detected again, halts the plugin from processing it further (by returning <code>undefined</code>).</p>
<p>moreover, this plugin validates that the <code>args.namespace</code> it receives must be one of <code>[undefined, &quot;&quot;, &quot;file&quot;]</code>
(see <a href="../variables/plugins_typedefs.defaultEsbuildNamespaces.html" class="tsd-kind-variable">defaultEsbuildNamespaces</a>), otherwise it will terminate processing it any further.
this check is put in place to prevent this plugin from treading into the territory of other plugins' namespaces,
which would potentially ruin their logic and <code>pluginData</code>.</p>
</div>
</div><div class="tsd-comment tsd-typography"></div></section><details class="tsd-panel-group tsd-member-group tsd-accordion" open><summary class="tsd-accordion-summary" data-key="section-Interfaces"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg><h2>Interfaces</h2></summary><dl class="tsd-member-summaries"><dt class="tsd-member-summary" id="initialplugindata"><span class="tsd-member-summary-name"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Interface"><use href="../assets/icons.svg#icon-256"></use></svg><a href="../interfaces/plugins_filters_entry.InitialPluginData.html">InitialPluginData</a><a href="#initialplugindata" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></span></dt><dd class="tsd-member-summary"></dd><dt class="tsd-member-summary" id="entrypluginsetupconfig"><span class="tsd-member-summary-name"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Interface"><use href="../assets/icons.svg#icon-256"></use></svg><a href="../interfaces/plugins_filters_entry.EntryPluginSetupConfig.html">EntryPluginSetupConfig</a><a href="#entrypluginsetupconfig" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></span></dt><dd class="tsd-member-summary"></dd></dl></details><details class="tsd-panel-group tsd-member-group tsd-accordion" open><summary class="tsd-accordion-summary" data-key="section-Functions"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg><h2>Functions</h2></summary><dl class="tsd-member-summaries"><dt class="tsd-member-summary" id="entrypluginsetup"><span class="tsd-member-summary-name"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Function"><use href="../assets/icons.svg#icon-64"></use></svg><a href="../functions/plugins_filters_entry.entryPluginSetup.html">entryPluginSetup</a><a href="#entrypluginsetup" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></span></dt><dd class="tsd-member-summary"></dd><dt class="tsd-member-summary" id="entryplugin"><span class="tsd-member-summary-name"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Function"><use href="../assets/icons.svg#icon-64"></use></svg><a href="../functions/plugins_filters_entry.entryPlugin.html">entryPlugin</a><a href="#entryplugin" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></span></dt><dd class="tsd-member-summary"></dd></dl></details></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg><h3>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg><h3>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#details"><span>details</span></a><ul><li><a href="#1-initial-plugin-data-injector"><span>1. initial plugin-<wbr/>data injector</span></a></li><li><a href="#2-plugin-data-inheritor"><span>2. plugin-<wbr/>data inheritor</span></a></li><li><a href="#3-absolute-path-resolution"><span>3. absolute-<wbr/>path resolution</span></a></li></ul><details open class="tsd-accordion tsd-page-navigation-section"><summary class="tsd-accordion-summary" data-key="section-Interfaces"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Interfaces</summary><div><a href="#initialplugindata"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Interface"><use href="../assets/icons.svg#icon-256"></use></svg><span>Initial<wbr/>Plugin<wbr/>Data</span></a><a href="#entrypluginsetupconfig"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Interface"><use href="../assets/icons.svg#icon-256"></use></svg><span>Entry<wbr/>Plugin<wbr/>Setup<wbr/>Config</span></a></div></details><details open class="tsd-accordion tsd-page-navigation-section"><summary class="tsd-accordion-summary" data-key="section-Functions"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Functions</summary><div><a href="#entrypluginsetup"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Function"><use href="../assets/icons.svg#icon-64"></use></svg><span>entry<wbr/>Plugin<wbr/>Setup</span></a><a href="#entryplugin"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Function"><use href="../assets/icons.svg#icon-64"></use></svg><span>entry<wbr/>Plugin</span></a></div></details></div></details></div><div class="site-menu"><nav id="tsd-sidebar-links" class="tsd-navigation"><a href="https://github.com/oazmi/esbuild-plugin-deno" class="tsd-nav-link">github</a><a href="/esbuild-plugin-deno/" class="tsd-nav-link">readme</a><a href="/esbuild-plugin-deno/src/mod.ts" class="tsd-nav-link">src</a><a href="/esbuild-plugin-deno/dist/mod.js" class="tsd-nav-link">dist</a><a href="/esbuild-plugin-deno/examples/index.html" class="tsd-nav-link">examples</a></nav><nav class="tsd-navigation"><a href="../modules.html">@oazmi/esbuild-plugin-deno - v0.4.3</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
